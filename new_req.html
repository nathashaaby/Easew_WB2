<!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>EASEW - Designer</title>

  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
    integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
    integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
    crossorigin="anonymous"></script>
</head>

<body style="background-image: url(./bg.jpg); background-repeat: no-repeat; background-size: cover;">

  <nav class="navbar navbar-md">

    <div class="navbar-header">

      <img class="logo2" src="./EASEW.png">
      <font id="EASEW">EASEW</font>
    </div>

    <ul class="nav">

      <li class="nav-item">
        <a class="nav-link" href="./Des HomePage.html"
          style="border-style: solid; border-radius: 25px; border-color: black;">HOME</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="./Des ReqPage.html"
          style="border-style: solid; border-radius: 25px; border-color: black;">VIEW REQUESTS</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="./des_about.html"
          style="border-style: solid; border-radius: 25px; border-color: black;">ABOUT</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="./new_req.html"
          style="border-style: solid; border-radius: 25px; border-color: blue;">SEARCH REQUESTS</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="#" id="signout"
          style="border-style: solid; border-radius: 25px; border-color: black;">LOG OUT</a>
      </li>
      <li class="nav-item">
        <input type="text" id="mail1" style="border: 0; background-color: black; color: blue;">
      </li>
    </ul>
  </nav>

  <div class="container" style="margin-top: 50px;margin-bottom: 50px; background-color: rgb(50, 48, 48); border-radius: 25px; opacity: 90%;">

    <div id="Row" class="row no-gutters text-center">

      <div class="col" style="background-color:rgb(50, 48, 48) ;">

        <h2 style="color: white; letter-spacing: 25px; font-weight: bold;">REQUEST DETAILS</h2>
      </div>
    </div>
    <div id="Row" class="row no-gutters text-center">

      <div class="col-lg-12" style="background-color:rgb(50, 48, 48) ;">

        <h3 style="color:#fff ;">Search By Uid</h3>
        <input class="form-control my-3" placeholder="Paste the uid here" type="text" id="uid">
        <button id="submit" type="button" class="btn btn-primary">Fetch Data</button>
      </div>
    </div>
    <h4 id="email"></h4>
    <div class="col px-0 py-5 align-items-center" style="padding-bottom: 25px;">
      <div class="card">
        <img src="..." class="card-img-top" alt="reference image">
        <div class="card-body">
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Email</li>
          <p id="email1"></p>
          <li class="list-group-item">Title</li>
          <p id="title1"></p>
          <li class="list-group-item">Dress Type</li>
          <p id="type"></p>
          <li class="list-group-item">Category</li>
          <p id="category"></p>
          <li class="list-group-item">Description</li>
          <p id="dress_details"></p>
          <li class="list-group-item">Expeceted Rate</li>
          <p id="rate"></p>
          <li class="list-group-item">Expected Date</li>
          <p id="expected_date"></p>
          <input type="text" style="display: none;" id="mail1">
        </ul>

        <div class="" style="margin-left:auto; margin-right:auto; margin-bottom: 20px;">
          <button id="accept" type="button" class="btn btn-success">Accept</button>
        </div>
      </div>
    </div>
  </div>
</body>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-analytics.js";
  import { getDatabase, set, ref, get, child } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAeccx_CEqdaOkFGVPn7BdWyexIZZoB8KU",
    authDomain: "easew-f8056.firebaseapp.com",
    databaseURL: "https://easew-f8056-default-rtdb.firebaseio.com",
    projectId: "easew-f8056",
    storageBucket: "easew-f8056.appspot.com",
    messagingSenderId: "677782385102",
    appId: "1:677782385102:web:acb786b5badc3345d2bb9f",
    measurementId: "G-JFNLZDG1HB"
  };
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const database = getDatabase(app);
  const auth = getAuth();
  onAuthStateChanged(auth, (user) => {
    if (user) {

      const uid = user.email;
      console.log(uid);
      document.getElementById("mail1").value = uid
      const dbRef = ref(getDatabase());


      signout.addEventListener('click', (e) => {
        signOut(auth).then(() => {
          location.href = "Des Login.html"
        })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            // ..
            alert(errorMessage)
          });
      })
      // ...
    }
  });



</script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
<script>

  //BE SURE TO PROTECT EVERYTHING IN THE CONFIG
  //DON'T COMMIT IT!!!

  // Initialize Firebase
  const config = {
    apiKey: "AIzaSyAeccx_CEqdaOkFGVPn7BdWyexIZZoB8KU",
    authDomain: "easew-f8056.firebaseapp.com",
    databaseURL: "https://easew-f8056-default-rtdb.firebaseio.com",
    projectId: "easew-f8056",
    storageBucket: "easew-f8056.appspot.com",
    messagingSenderId: "677782385102",
    appId: "1:677782385102:web:acb786b5badc3345d2bb9f",
    measurementId: "G-JFNLZDG1HB"
  };
  firebase.initializeApp(config);

  var uid = document.getElementById("uid").value
  var firebaseRef = firebase.database().ref("users/" + uid)
  function ready() {
    uid1 = document.getElementById("uid").value;
  }
  document.getElementById("accept").onclick = function () {
    ready();
    firebase.database().ref('users/' + uid1).update({
      status: "accepted"
    })
    firebase.database().ref('users/' + uid1).update({
      designer: document.getElementById("mail1").value
    })
    alert("The request has been accepted")
    location.href = "Des ReqPage.html"
  }

  document.getElementById("submit").onclick = function () {
    ready();
    firebase.database().ref('users/' + uid1).on('value', function (snapshot) {
      var mail = snapshot.val().email
      document.getElementById("email1").innerHTML = mail
      var title1 = snapshot.val().title
      document.getElementById("title1").innerHTML = title1
      var type = snapshot.val().type
      document.getElementById("type").innerHTML = type
      var cat = snapshot.val().category
      document.getElementById("category").innerHTML = cat
      var det = snapshot.val().dress_details
      document.getElementById("dress_details").innerHTML = det
      var rate = snapshot.val().rate
      document.getElementById("rate").innerHTML = rate
      var date = snapshot.val().expected_date
      document.getElementById("expected_date").innerHTML = date
    })
  }


</script>

</html>